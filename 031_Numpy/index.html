<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Prof P. Lewis">
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Numpy - GEOG0111</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Numpy";
    var mkdocs_page_input_path = "031_Numpy.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> GEOG0111</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="" href="../index.md">Introduction</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Course Basics</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../001_Notebook_use/">Notebook Use</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../002_Unix/">Unix</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../003_Help/">Help</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../004_Accounts/">Accounts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../005_Packages/">Packages</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Answers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../001_Notebook_use_answers/">Notebook Use</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../002_Unix_answers/">Unix</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../003_Help_answers/">Help</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Core Concepts</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../010_Python_Introduction/">Python Introduction</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../011_Python_data_types/">Python Data Types</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../012_Python_strings/">Python Strings</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../013_Python_string_methods/">Python String Methods</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../014_Python_groups/">Python Groups</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../015_Python_control/">Python Control</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../016_Python_for/">Python For</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../017_Functions/">Functions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../018_Running_Python/">Running Python</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Answers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../010_Python_Introduction_answers/">Python Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../011_Python_data_types_answers/">Python Data Types</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../012_Python_strings_answers/">Python Strings</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../013_Python_string_methods_answers/">Python String Methods</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../014_Python_groups_answers/">Python Groups</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../015_Python_control_answers/">Python Control</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../016_Python_for_answers/">Python For</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../017_Functions_answers/">Functions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../018_Running_Python_answers/">Running Python</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Data Basics</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../020_Python_files/">Python Files</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../021_Streams/">Streams</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../022_Read_write_files/">Read Write Files</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../023_Plotting/">Plotting</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../024_Image_display/">Image Display</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Answers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../020_Python_files_answers/">Python Files</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../021_Streams_answers/">Streams</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../022_Read_write_files_answers/">Read Write Files</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../023_Plotting_answers/">Plotting</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../024_Image_display_answers/">Image Display</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Array Data</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../030_NASA_MODIS_Earthdata/">NASA MODIS Earthdata</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Numpy</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#purpose">Purpose</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#numpy">numpy</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#introduction-to-arrays">Introduction to arrays</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#array-arithmetic">Array arithmetic</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#exercise-1">Exercise 1</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#more-detail-on-numpyarrays">More detail on numpy.arrays</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shape-ndim-size">shape, ndim, size</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#array-creators">Array creators</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#indexing-arrays">Indexing arrays</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#exercise-2">Exercise 2</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#exercise-3">Exercise 3</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#nplinspace-nparange-npmgrid">np.linspace, np.arange, np.mgrid</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#exercise-4">Exercise 4</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#summary-statistics">Summary statistics</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../032_More_numpy/">More Numpy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Answers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../030_NASA_MODIS_Earthdata_answers/">NASA MODIS Earthdata</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../031_Numpy_answers/">Numpy</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../032_More_numpy_answers/">More Numpy</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Geospatial Data</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../040_GDAL_mosaicing_and_masking/">GDAL Mosaicing And Masking</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../041_GDAL_timeseries/">GDAL Timeseries</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../042_Weighted_smoothing_and_interpolation/">Weighted Smoothing And Interpolation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../043_Weighted_interpolation/">Weighted Interpolation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Answers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../040_GDAL_mosaicing_and_masking_answers/">GDAL Mosaicing And Masking</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../041_GDAL_timeseries_answers/">GDAL Timeseries</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../043_Weighted_interpolation_answers/">Weighted Interpolation</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Modelling</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../050_Models/">Models</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../051_Phenology_model/">Phenology Model</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Answers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../050_Models_answers/">Models</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../051_Phenology_model_answers/">Phenology Model</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Assessment</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../060_Groups/">Groups</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../061_Script/">Script</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../062_Part1/">Part1</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../063_Part1_code/">Part1 Code</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../064_Numpy/">Numpy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../065_LAI/">Lai</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../066_Part2/">Part2</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Answers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../060_Groups_answers/">Groups</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../061_Script_answers/">Script</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../064_Numpy_answers/">Numpy</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../065_LAI_answers/">Lai</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Summary</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../070_Summary/">Summary</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">GEOG0111</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Array Data &raquo;</li>
        
      
    
    <li>Numpy</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/UCL-EO/geog0111/edit/master/docs/031_Numpy.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="031-manipulating-data-numpy">031 Manipulating data: <code>numpy</code></h1>
<h2 id="purpose">Purpose</h2>
<p>While Python has a rich set of modules and data types by default, for numerical computing you'll be using two main libraries that conform the backbone of the <a href="https://scipy.org/about.html">Python scientific stack</a>. These libraries implement a great deal of functionality related to mathematical operations and efficient computations on large data volumes. These libraries are <a href="http://numpy.org"><code>numpy</code></a> and <a href="http://scipy.org"><code>scipy</code></a>. <code>numpy</code>, which we will concentrate on in this section, deals with efficient arrays, similar to lists, that simplify many common processing operations. Of course, just doing calculations isn't much fun if you can't plot some results. To do this, we use the <a href="http://matplotlib.org"><code>matplotlib</code></a> library that we have seen in previous sessions.</p>
<p>You may find it interesting to read the recent <a href="https://www.nature.com/articles/s41586-020-2649-2">numpy paper</a> in Nature for some background and detail on <code>numpy</code>.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>You will need some understanding of the following:</p>
<ul>
<li><a href="../001_Notebook_use/">001 Using Notebooks</a></li>
<li><a href="../003_Help/">003 Getting help</a></li>
<li><a href="../010_Python_Introduction/">010 Variables, comments and print()</a></li>
<li><a href="../011_Python_data_types/">011 Data types</a> </li>
<li><a href="../012_Python_strings/">012 String formatting</a></li>
<li><a href="../013_Python_string_methods/">013_Python_string_methods</a></li>
<li><a href="../020_Python_files/">020_Python_files</a></li>
<li><a href="../021_Streams/">021 Streams</a></li>
<li><a href="../022_Read_write_files/">022 Read write files</a></li>
<li><a href="../023_Plotting/">023 Plotting</a></li>
<li><a href="../024_Image_display/">024_Image_display</a></li>
<li><a href="../030_NASA_MODIS_Earthdata/">030_NASA_MODIS_Earthdata</a></li>
</ul>
<h2 id="numpy"><code>numpy</code></h2>
<h3 id="introduction-to-arrays">Introduction to arrays</h3>
<p>You import the <code>numpy</code> library using</p>
<pre><code>import numpy as np
</code></pre>
<p>This means that all the functionality of <code>numpy</code> is accessed by the prefix <code>np.</code>: e.g. <code>np.array</code>. The main element of <code>numpy</code> is the numpy array. </p>
<p>An array is in some ways like the <a href="../014_Python_groups/#list">list object we have seen before</a>, but unlike a list, all the elements are of the same type, for example floating point numbers. Further, the range of things we can do with a <code>numpy</code> list is much greater than with the basic list.</p>
<pre><code class="python">import numpy as np  # Import the numpy library

# Example 1
# An array with 5 ones
arr = np.ones(5)
print(f'--&gt; Array with 5 ones:\n{arr}')

# type
print(f'--&gt; type of array:\n{type(arr)}')
assert type(arr) == np.ndarray

# Example 2
arr = np.array([1, 2, 3, 4])
print(f'--&gt; Array started from a list of integers:\n{arr}')

# Example 3
# An array started from a list of numbers, what's the difference??
arr = np.array([1., 2, 3, 4])
print(f'--&gt; Array started from a list of floats (some implicit):\n{arr}')

</code></pre>

<pre><code>--&gt; Array with 5 ones:
[1. 1. 1. 1. 1.]
--&gt; type of array:
&lt;class 'numpy.ndarray'&gt;
--&gt; Array started from a list of integers:
[1 2 3 4]
--&gt; Array started from a list of floats (some implicit):
[1. 2. 3. 4.]
</code></pre>
<p>In the example above we have generated an array where all the elements are <code>1.0</code>, using <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ones.html"><code>np.ones</code></a>, and then we have been able to generate arrays from lists using the <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html"><code>np.array</code></a> function. The difference between the 2nd and 3rd examples is that in the 2nd example, all the elements of the list are integers, and in the 3rd example, one is a floating point number. <code>numpy</code> automatically makes the array floating point by converting the integers to floating point numbers.</p>
<p>We saw in an <a href="../011_Python_data_types/#Conversion-between-data-types">earlier session</a> how we could convert a floating point number to integer with:</p>
<pre><code class="python">float_version = 10.5
print(f'float version: {float_version}')

# convert individual number to int
int_version = int(float_version)
print(f'int version  : {int_version}')
</code></pre>

<pre><code>float version: 10.5
int version  : 10
</code></pre>
<p>We can similarly convert between numpy data types (where appropriate) with <code>np.astype()</code>:</p>
<pre><code class="python"># An array started from a list of numbers, what's the difference??
float_version = np.array([1., 2., 3., 4.])
print(f'float version: {float_version}')

# convert whole array to int
int_version = float_version.astype(np.int)
print(f'int version  : {int_version}')
</code></pre>

<pre><code>float version: [1. 2. 3. 4.]
int version  : [1 2 3 4]
</code></pre>
<h3 id="array-arithmetic">Array arithmetic</h3>
<p>What else can we do with arrays? Perhaps the most significant thing is that can efficiently operate all array elements without loops, by treating the array as an object:</p>
<pre><code class="python">arr = np.ones(10)
print(f'2 x {arr} \n  = {2 * arr}')
</code></pre>

<pre><code>2 x [1. 1. 1. 1. 1. 1. 1. 1. 1. 1.] 
  = [2. 2. 2. 2. 2. 2. 2. 2. 2. 2.]
</code></pre>
<p><code>numpy</code> is clever enough to figure out that the 2 multiplying the array is applied to all elements of the array, and returns an array of the same size as <code>arr</code> with the elements of <code>arr</code> multiplied by 2. We can also multiply two arrays of the same size. So let's create an array with the numbers 0 to 9 and one with the numbers 9 to 0 and do a times table:</p>
<pre><code class="python">arr1 = 9 * np.ones(10).astype(np.int)
arr2 = np.arange(1, 11)  # arange gives an array from 1 to 11, 11 not included

print(arr1)
print(arr2)

print(arr1 * arr2)
</code></pre>

<pre><code>[9 9 9 9 9 9 9 9 9 9]
[ 1  2  3  4  5  6  7  8  9 10]
[ 9 18 27 36 45 54 63 72 81 90]
</code></pre>
<h4 id="exercise-1">Exercise 1</h4>
<ul>
<li>Using code similar to the above and a <code>for</code> loop, write the times tables for 2 to 10. The solution you're looking for should look a bit like this:<pre><code>[ 2  4  6  8 10 12 14 16 18 20]
[ 3  6  9 12 15 18 21 24 27 30]
[ 4  8 12 16 20 24 28 32 36 40]
[ 5 10 15 20 25 30 35 40 45 50]
[ 6 12 18 24 30 36 42 48 54 60]
[ 7 14 21 28 35 42 49 56 63 70]
[ 8 16 24 32 40 48 56 64 72 80]
[ 9 18 27 36 45 54 63 72 81 90]
[ 10  20  30  40  50  60  70  80  90 100]
</code></pre>
</li>
</ul>
<p>The <code>numpy</code> documenation is huge. There's an <a href="https://docs.scipy.org/doc/numpy/user/index.html">user's guide</a>, as well as a reference to all the <a href="https://docs.scipy.org/doc/numpy/reference/index.html">contents of the library</a>. There's even <a href="https://docs.scipy.org/doc/numpy/user/quickstart.html">a tutorial availabe</a> if you get bored with this one.</p>
<h3 id="more-detail-on-numpyarrays">More detail on <code>numpy.arrays</code></h3>
<p>So far, we have seen a 1D array, which is the equivalent to a vector. But arrays can have more dimensions: a 2D array would be equivalent to a matrix (or an image, with rows and columns), and a 3D array would be a volume split into voxels, as seen below</p>
<p><a href="https://cdn-images-1.medium.com/max/1120/1*Ikn1J6siiiCSk4ivYUhdgw.png"><img alt="numpy arrays" src="../images/1Ikn1J6siiiCSk4ivYUhdgw.png" /></a></p>
<p>So a 1D array has one axis, a 2D array has 2 axes, a 3D array 3, and so on. The <code>shape</code> of the array provides a tuple with the number of elements along each axis. Let's see this with some generally useful array creation options:</p>
<pre><code class="python"># Create a 2D array from a list of rows. 
#Â Note that the 3 rows have the same number of elements!
arr1 = np.array([[0,  1,  2,  3,  4],\
                 [5,  6,  7,  8,  9],\
                 [10, 11, 12, 13, 14]])

# A 2D array from a list of tuples.
# We're specifically asking for floating point numbers
arr2 = np.array([(1.5, 2, 3),\
                 (4  , 5, 6)], dtype=np.float)
print(&quot;3*5 array:&quot;)
print(arr1)
print(&quot;2*3 array:&quot;)
print(arr2)
</code></pre>

<pre><code>3*5 array:
[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13 14]]
2*3 array:
[[1.5 2.  3. ]
 [4.  5.  6. ]]
</code></pre>
<h3 id="shape-ndim-size"><code>shape</code>, <code>ndim</code>, <code>size</code></h3>
<p>One of the key aspects of <code>numpy</code> is the way it deals efficiently with large, multi-dimensional arrays. To learn how to use <code>numpy</code> well, especially when we head to more complex problems later in the notes, you need to be aware of the dimensions and shape of the array you are processing.</p>
<p>The key terms here are <code>array.ndim</code> which returns the number of dimensions of the array, <code>array.size</code> that gives the total number of elements in the array, and <code>array.shape</code> which gives the number of samples in each dimension. </p>
<p>If the arrays are of the same shape (and some other conditions we shall see later), you can do standard operations between them <strong>element-wise</strong>:</p>
<pre><code class="python">import numpy as np

arr1 = np.array([[3, 4, 5, 6.],[6,4,6,2]])
arr2 = np.array([[30, 40, 50, 60.],[50,40,30,20]])

print(f'the shape of arr1 is {arr1.shape} and ndim is {arr1.ndim} and size is {arr1.size}')
print(f'the shape of arr2 is {arr2.shape} and ndim is {arr2.ndim} and size is {arr2.size}')

# so we can do element-wise operations such as 
# add, subtract, multiply etc

print(arr2 - arr1)
print(f'the shape of arr1 - arr2 is {(arr1 - arr2).shape}')
print(arr1 * arr2)
print(f'the shape of arr1 * arr2 is {(arr1 * arr2).shape}')
</code></pre>

<pre><code>the shape of arr1 is (2, 4) and ndim is 2 and size is 8
the shape of arr2 is (2, 4) and ndim is 2 and size is 8
[[27. 36. 45. 54.]
 [44. 36. 24. 18.]]
the shape of arr1 - arr2 is (2, 4)
[[ 90. 160. 250. 360.]
 [300. 160. 180.  40.]]
the shape of arr1 * arr2 is (2, 4)
</code></pre>
<h3 id="array-creators">Array creators</h3>
<p>Quite often, we will want to initialise an array to be all the same number. The methods for doing this as 0,1 in <code>numpy</code> are <code>np.zeros()</code> and <code>np.ones()</code> respectively.</p>
<p>We specify the shape of the array we want with an appropriate tuple.</p>
<p>We can specify the data type of the array with the keyword <code>dtype=np.int</code> (for integer). This would have the same effect as using <code>array.astype(np.int)</code> as above, but is shorter, clearer and neater. </p>
<pre><code class="python"># Creates a 3*4 array of 0s
arr = np.zeros((3, 4))
print(&quot;3*4 array of 0s&quot;)
print(arr)

# Creates a 2x3x4 array of int 1's
print(&quot;2*3*4 array of 1s (integers)&quot;)
arr = np.ones((2, 3, 4), dtype=np.int)
print(arr)
</code></pre>

<pre><code>3*4 array of 0s
[[0. 0. 0. 0.]
 [0. 0. 0. 0.]
 [0. 0. 0. 0.]]
2*3*4 array of 1s (integers)
[[[1 1 1 1]
  [1 1 1 1]
  [1 1 1 1]]

 [[1 1 1 1]
  [1 1 1 1]
  [1 1 1 1]]]
</code></pre>
<p>A similar useful set of functions are <code>np.ones_like</code> and <code>np.zeros_like</code>. These create a copy of an array, with the values set to 1 or 0 respectively:</p>
<pre><code class="python">base = np.array([[1,2,3],[4,7,0]])
print(f'base:\n{base}')

z = np.zeros_like(base)
print(f'z:\n{z}')
</code></pre>

<pre><code>base:
[[1 2 3]
 [4 7 0]]
z:
[[0 0 0]
 [0 0 0]]
</code></pre>
<h3 id="indexing-arrays">Indexing arrays</h3>
<p>We can refer to a particular value within an array with a tuple describing an index. </p>
<p>For example:</p>
<pre><code class="python">import numpy as np

arr = np.array([[0,  1,  2,  3,  4],\
                 [5,  6,  7,  8,  9],\
                 [10, 11, 12, 13, 14]])

# row 2, column 3
# so index is (2,3)
print(arr[2,3])
</code></pre>

<pre><code>13
</code></pre>
<p>In the example above, the index was implicitly a tuple, but we can also be explicit:</p>
<pre><code class="python"># row 2, column 3
# so index is (2,3)
# make an index tuple
index = (2,3)
print(arr[index])
</code></pre>

<pre><code>13
</code></pre>
<p>If we want to refer to a set of indices, we can use a 2D index tuple:</p>
<pre><code class="python">import numpy as np

arr = np.array([[0,  1,  2,  3,  4],\
                 [5,  6,  7,  8,  9],\
                 [10, 11, 12, 13, 14]])

print(f'shape is {arr.shape}')
# make sure we dont index outside of this shape!
# row 2, column 3
# row 0, column 4
# row 1, column 2

# so 2D index is ((2,0,1),(3,4,1))
# make an index tuple
print(f'data:\n{arr}')
index = ((2,0,1),(3,4,1))
print(f'values at {index} are {arr[index]}')
</code></pre>

<pre><code>shape is (3, 5)
data:
[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13 14]]
values at ((2, 0, 1), (3, 4, 1)) are [13  4  6]
</code></pre>
<p>We will see below that there are other options for referring to elements of an array, but this 2D tuple of indices is important in showing how to select individual elements from an array.</p>
<h4 id="exercise-2">Exercise 2</h4>
<ul>
<li>write a function that does the following:<ul>
<li>create a 2-D tuple called <code>indices</code> containing the integers <code>((0, 1, 2, 3, 4),(5, 6, 7, 8, 9))</code></li>
<li>create a 2-D numpy array called <code>data</code> of shape <code>(5,10)</code>, data type <code>int</code>, initialised with zero</li>
<li>set the value of <code>data[r,c]</code> to be <code>1</code> for each of the 5 row,column pairs specified in <code>indices</code>.</li>
<li>return the data array</li>
</ul>
</li>
<li>print out the result returned</li>
</ul>
<p>The result should look like:</p>
<pre><code>[[0 0 0 0 0 1 0 0 0 0]
 [0 0 0 0 0 0 1 0 0 0]
 [0 0 0 0 0 0 0 1 0 0]
 [0 0 0 0 0 0 0 0 1 0]
 [0 0 0 0 0 0 0 0 0 1]]
</code></pre>
<p><strong>Hint</strong>: You could use a <code>for</code> loop, but what does <code>data[indices]</code> give?</p>
<h4 id="exercise-3">Exercise 3</h4>
<ul>
<li>write a more flexible version of you function above where <code>indices</code>, the value you want to set (<code>1</code> above) and the desired shape of <code>data</code> are specified through function keyword arguments (e.g. <code>indices=((0, 1, 2, 3, 4),(5, 6, 7, 8, 9)),value=1</code>) with the shape set as a required argument.</li>
</ul>
<h3 id="nplinspace-nparange-npmgrid"><code>np.linspace</code>, <code>np.arange</code>, <code>np.mgrid</code></h3>
<p>As well as initialising arrays with the same number as above, we often also want to initialise with common data patterns. This includes simple integer ranges <code>(start, stop, step)</code> in a similar fashion to <a href="../013_Python_string_methods/#slice">slicing we saw earlier</a>.</p>
<p>For example:</p>
<pre><code>np.arange(start, stop, step)
</code></pre>
<p>will produce a list of integer numbers from <code>start</code> to <code>stop</code> in steps of <code>step</code>. It is similar to the <a href="../016_Python_for/#range()"><code>range</code> function we have seen perviously</a>.</p>
<p>We will introduce the function <code>np.linspace(start, stop, nsamp)</code> that creates an array of equally-spaced numbers according to the pattern <code>(start, stop, nsamp)</code>.</p>
<pre><code class="python"># array creators

print(&quot;1D array of numbers from 0 to 2 in increments of 0.3&quot;)
start = 0
stop = 2.0
step = 0.3

arr = np.arange(start, stop, step)
print(f'arr of shape {arr.shape}:\n\t{arr}')

start = 0
stop = 34
nsamp = 9
arr = np.linspace(start, stop, nsamp)
print(
    f&quot;array of shape {arr.shape} numbers equally spaced from {start} to {stop}:\n\t{arr}&quot;)

np.linspace(stop, start, 9)
</code></pre>

<pre><code>1D array of numbers from 0 to 2 in increments of 0.3
arr of shape (7,):
    [0.  0.3 0.6 0.9 1.2 1.5 1.8]
array of shape (9,) numbers equally spaced from 0 to 34:
    [ 0.    4.25  8.5  12.75 17.   21.25 25.5  29.75 34.  ]





array([34.  , 29.75, 25.5 , 21.25, 17.  , 12.75,  8.5 ,  4.25,  0.  ])
</code></pre>
<h4 id="exercise-4">Exercise 4</h4>
<ul>
<li>print an array of integer numbers from 100 to 1</li>
<li>print an array with 9 numbers equally spaced between 100 and 1</li>
</ul>
<p>Hint: what value of skip would be appropriate here? what about <code>start</code> and <code>stop</code>?</p>
<p>If we want to generate a multi-dimensional array with regularly-spaced numbers, we can use <code>np.mgrid[start:stop:step]</code>:</p>
<pre><code class="python">import numpy as np

# define the min and max for the grid we want
p0min,p0max,p0step = 0.0,1.0,0.1

np.mgrid[p0min:p0max:p0step]
</code></pre>

<pre><code>array([0. , 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9])
</code></pre>
<p>If we want the grid to be inclusive of <code>p0max</code> we must increase the maximum value by <code>p0step</code>:</p>
<pre><code class="python">np.mgrid[p0min:p0max+p0step:p0step]
</code></pre>

<pre><code>array([0. , 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1. ])
</code></pre>
<p>Now, for a 2-D grid we use <code>np.mgrid[start1:stop1:step1,start2:stop2:step2]</code>:</p>
<pre><code class="python">import matplotlib.pyplot as plt
# define the min and max and step for the grid we want
p0min,p0max,p0step = 0.0,0.5,0.05
p1min,p1max,p1step = 0.0,0.001,0.0001


gridp0,gridp1 = np.mgrid[p0min:p0max+p0step:p0step,\
                         p1min:p1max+p1step:p1step]

# plot it
fig, axs = plt.subplots(1,1,figsize=(5,5))
axs.plot(gridp0,gridp1,'+')
axs.set_xlabel('p1')
axs.set_ylabel('p2')

print(f'2d parameter grid: {gridp0.shape}')
</code></pre>

<pre><code>2d parameter grid: (11, 11)
</code></pre>
<p><img alt="png" src="../031_Numpy_files/031_Numpy_39_1.png" /></p>
<h2 id="summary-statistics">Summary statistics</h2>
<p>Below are some representative arithmetic operations that you can use on arrays. Remember that they happen <strong>elementwise</strong> (i.e. to the whole array):</p>
<pre><code class="python"># initialise some numbers
b = np.arange(4)
print(f'{b}^2 = {b**2}\n')

a = np.array([20, 30, 40, 50])
print(f&quot;assuming in radians,\n10*sin({a}) = {10 * np.sin(a)}&quot;)

print(&quot;\nSome useful numpy array methods for summary statistics...\n&quot;)
print(f&quot;Find the maximum of an array: a.max():   {a.max()}&quot;)
print(f&quot;Find the minimum of an array: a.min():   {a.min()}&quot;)
print(f&quot;Find the sum of an array: a.sum():       {a.sum()}&quot;)
print(f&quot;Find the mean of an array: a.mean():     {a.mean(): &gt;5.2f}&quot;)
print(f&quot;Find the std dev of an array: a.std():   {a.std() : &gt;5.2f}&quot;)
</code></pre>

<pre><code>[0 1 2 3]^2 = [0 1 4 9]

assuming in radians,
10*sin([20 30 40 50]) = [ 9.12945251 -9.88031624  7.4511316  -2.62374854]

Some useful numpy array methods for summary statistics...

Find the maximum of an array: a.max():   50
Find the minimum of an array: a.min():   20
Find the sum of an array: a.sum():       140
Find the mean of an array: a.mean():     35.00
Find the std dev of an array: a.std():   11.18
</code></pre>
<pre><code class="python"># variance and standard deviation:
#
# try var and see if it is the same as std * std
var = a.var()
std = a.std()

# use np.sqrt for square root
print(f'sqrt({np.sqrt(var)}) should equal {std}')
</code></pre>

<pre><code>sqrt(11.180339887498949) should equal 11.180339887498949
</code></pre>
<h3 id="summary">Summary</h3>
<p>In this section, you have been introduced to the <code>numpy</code> package and some detail on arrays. The big advantages of <code>numpy</code> are that you can easily perform array operators (such as adding two arrays together), and that <code>numpy</code> has a large number of useful functions for manipulating N-dimensional data in array form. This makes it particularly appropriate for raster geospatial data processing.</p>
<p>We have seen how to create various forms of array (e.g. <code>np.ones()</code>, <code>np.arange()</code>), how to calculate some basic statistics (<code>min()</code>, <code>max()</code> etc). and come across a range of <code>numpy</code> functions and concepts. </p>
<p>Remember:</p>
<pre><code>        import numpy as np
</code></pre>
<table>
<thead>
<tr>
<th>Function</th>
<th>description</th>
<th>keywords</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>np.array(x)</code></td>
<td>convert <code>x</code> (e.g. list) to <code>numpy</code> array</td>
<td><code>dtype=</code> : specify data type, e.g. <code>np.float</code>, <code>np.bool</code>, <code>np.int</code></td>
</tr>
<tr>
<td><code>np.ones(s)</code></td>
<td>generate array of values <code>1</code> of shape <code>s</code></td>
<td><code>dtype=</code></td>
</tr>
<tr>
<td><code>np.zeros(s)</code></td>
<td>generate array of values <code>0</code> of shape <code>s</code></td>
<td><code>dtype=</code></td>
</tr>
<tr>
<td><code>np.linspace(start,stop,nsamp)</code></td>
<td>generate array of <code>nsamp</code> values from <code>start</code> to <code>stop</code></td>
<td><code>dtype=</code></td>
</tr>
<tr>
<td><code>np.arange(start,stop,step)</code></td>
<td>generate array of numbers from <code>start</code> to (but not including) <code>stop</code> in steps of <code>step</code></td>
<td><code>dtype=</code></td>
</tr>
<tr>
<td><code>p0,p1 = np.mgrid[p0min:p0max:p0step,p1min:p1max:p1step]</code></td>
<td>generate grids <code>p0</code>, <code>p1</code> of combinations of samples from <code>p0min</code> to (but not including) <code>p0max</code> in steps of <code>p0step</code> and <code>p1min</code> to (but not including) <code>p1max</code> in steps of <code>p1step</code></td>
<td></td>
</tr>
<tr>
<td><code>a.astype(dtype)</code></td>
<td>convert array <code>a</code> to data type <code>dtype</code></td>
<td></td>
</tr>
<tr>
<td>a * b</td>
<td>multiply array <code>a</code> element-wise by array <code>b</code> , etc. for arithmetic</td>
<td></td>
</tr>
<tr>
<td><code>a.shape</code></td>
<td>tuple giving shape of array <code>a</code></td>
<td></td>
</tr>
<tr>
<td><code>a.ndim</code></td>
<td>tuple giving number of dimensions  of array <code>a</code></td>
<td></td>
</tr>
<tr>
<td><code>a.size</code></td>
<td>tuple giving total number of elements in array <code>a</code></td>
<td></td>
</tr>
<tr>
<td><code>a[start:stop:step]</code></td>
<td>array indexing for slice from <code>start</code> to <code>stop</code> in steps of <code>step</code> e.g. <code>np.array([2,5,3])[2:3])</code></td>
<td></td>
</tr>
<tr>
<td><code>a[index]</code></td>
<td>array indexing by explicit index tuple or tuple list e.g. <code>np.array([2,5,3])[(1,)]</code></td>
<td></td>
</tr>
<tr>
<td><code>a.min()</code></td>
<td>minimum value in array <code>a</code></td>
<td><code>axis=N</code> : value taken over axis <code>N</code></td>
</tr>
<tr>
<td><code>a.max()</code></td>
<td>maximum value in array <code>a</code></td>
<td><code>axis=N</code> : value taken over axis <code>N</code></td>
</tr>
<tr>
<td><code>a.mean()</code></td>
<td>mean value in array <code>a</code></td>
<td><code>axis=N</code> : value taken over axis <code>N</code></td>
</tr>
<tr>
<td><code>a.std()</code></td>
<td>standard deviation of values in array <code>a</code></td>
<td><code>axis=N</code> : value taken over axis <code>N</code></td>
</tr>
<tr>
<td><code>a.var()</code></td>
<td>variance of values in array <code>a</code></td>
<td><code>axis=N</code> : value taken over axis <code>N</code></td>
</tr>
<tr>
<td><code>a.sum()</code></td>
<td>sum of values in array <code>a</code></td>
<td><code>axis=N</code> : value taken over axis <code>N</code></td>
</tr>
<tr>
<td><code>a.prod()</code></td>
<td>product of values in array <code>a</code></td>
<td><code>axis=N</code> : value taken over axis <code>N</code></td>
</tr>
<tr>
<td><code>np.median(a)</code></td>
<td>median of values in array <code>a</code>, assumed <code>a</code> values in radians</td>
<td><code>axis=N</code> : value taken over axis <code>N</code></td>
</tr>
<tr>
<td><code>np.sqrt(a)</code></td>
<td>square root of values in array <code>a</code></td>
<td></td>
</tr>
<tr>
<td><code>np.sin(a)</code></td>
<td>sine of values in array <code>a</code>, assumed <code>a</code> values in radians etc.</td>
<td></td>
</tr>
</tbody>
</table>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../032_More_numpy/" class="btn btn-neutral float-right" title="More Numpy">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../030_NASA_MODIS_Earthdata/" class="btn btn-neutral" title="NASA MODIS Earthdata"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/UCL-EO/geog0111/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../030_NASA_MODIS_Earthdata/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../032_More_numpy/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
