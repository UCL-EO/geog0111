
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Prof P. Lewis">
      
      
      <link rel="icon" href="../images/ucl.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.9">
    
    
      
        <title>NASA MODIS Earthdata - GEOG0111</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#030-nasa-modis-earthdata" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="GEOG0111" class="md-header__button md-logo" aria-label="GEOG0111" data-md-component="logo">
      
  <img src="../images/ucl.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GEOG0111
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              NASA MODIS Earthdata
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/UCL-EO/geog0111" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="GEOG0111" class="md-nav__button md-logo" aria-label="GEOG0111" data-md-component="logo">
      
  <img src="../images/ucl.png" alt="logo">

    </a>
    GEOG0111
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/UCL-EO/geog0111" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Course Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Course Basics" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Course Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../001_Notebook_use/" class="md-nav__link">
        Notebook Use
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../002_Unix/" class="md-nav__link">
        Unix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../003_Help/" class="md-nav__link">
        Help
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../004_Accounts/" class="md-nav__link">
        Accounts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../005_Packages/" class="md-nav__link">
        Packages
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_6">
          Answers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Answers" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          Answers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../001_Notebook_use_answers/" class="md-nav__link">
        Notebook Use
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../002_Unix_answers/" class="md-nav__link">
        Unix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../003_Help_answers/" class="md-nav__link">
        Help
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Core Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core Concepts" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Core Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../010_Python_Introduction/" class="md-nav__link">
        Python Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../011_Python_data_types/" class="md-nav__link">
        Python Data Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../012_Python_strings/" class="md-nav__link">
        Python Strings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../013_Python_string_methods/" class="md-nav__link">
        Python String Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../014_Python_groups/" class="md-nav__link">
        Python Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../015_Python_control/" class="md-nav__link">
        Python Control
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../016_Python_for/" class="md-nav__link">
        Python For
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../017_Functions/" class="md-nav__link">
        Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../018_Running_Python/" class="md-nav__link">
        Running Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_10" type="checkbox" id="__nav_3_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_10">
          Answers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Answers" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_10">
          <span class="md-nav__icon md-icon"></span>
          Answers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../010_Python_Introduction_answers/" class="md-nav__link">
        Python Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../011_Python_data_types_answers/" class="md-nav__link">
        Python Data Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../012_Python_strings_answers/" class="md-nav__link">
        Python Strings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../013_Python_string_methods_answers/" class="md-nav__link">
        Python String Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../014_Python_groups_answers/" class="md-nav__link">
        Python Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../015_Python_control_answers/" class="md-nav__link">
        Python Control
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../016_Python_for_answers/" class="md-nav__link">
        Python For
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../017_Functions_answers/" class="md-nav__link">
        Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../018_Running_Python_answers/" class="md-nav__link">
        Running Python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Data Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Basics" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Data Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../020_Python_files/" class="md-nav__link">
        Python Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../021_URLs/" class="md-nav__link">
        Urls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../022_Pandas/" class="md-nav__link">
        Pandas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../023_Plotting/" class="md-nav__link">
        Plotting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../024_Image_display/" class="md-nav__link">
        Image Display
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6" type="checkbox" id="__nav_4_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_6">
          Answers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Answers" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Answers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../020_Python_files_answers/" class="md-nav__link">
        Python Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../021_URLs_answers/" class="md-nav__link">
        Urls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../022_Pandas_answers/" class="md-nav__link">
        Pandas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../023_Plotting_answers/" class="md-nav__link">
        Plotting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../024_Image_display_answers/" class="md-nav__link">
        Image Display
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Array Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Array Data" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Array Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          NASA MODIS Earthdata
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        NASA MODIS Earthdata
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    Purpose
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test" class="md-nav__link">
    Test
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modis-lai-product" class="md-nav__link">
    MODIS LAI product
  </a>
  
    <nav class="md-nav" aria-label="MODIS LAI product">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1" class="md-nav__link">
    Exercise 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-nasa-modis-urls" class="md-nav__link">
    Accessing NASA MODIS URLs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-products" class="md-nav__link">
    Data Products
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mota" class="md-nav__link">
    MOTA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#masking" class="md-nav__link">
    masking
  </a>
  
    <nav class="md-nav" aria-label="masking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-2-mask-invalid-data" class="md-nav__link">
    Exercise 2: mask invalid data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#burned-area-dataset-mcd64a1" class="md-nav__link">
    Burned area dataset MCD64A1
  </a>
  
    <nav class="md-nav" aria-label="Burned area dataset MCD64A1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-3" class="md-nav__link">
    Exercise 3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snow" class="md-nav__link">
    Snow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#land-cover-dataset-mcd12q1" class="md-nav__link">
    Land Cover dataset MCD12Q1
  </a>
  
    <nav class="md-nav" aria-label="Land Cover dataset MCD12Q1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-5" class="md-nav__link">
    Exercise 5
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../031_Numpy/" class="md-nav__link">
        Numpy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../032_More_numpy/" class="md-nav__link">
        More Numpy
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          Answers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Answers" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Answers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../030_NASA_MODIS_Earthdata_answers/" class="md-nav__link">
        NASA MODIS Earthdata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../031_Numpy_answers/" class="md-nav__link">
        Numpy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../032_More_numpy_answers/" class="md-nav__link">
        More Numpy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Geospatial Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Geospatial Data" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Geospatial Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../040_GDAL_mosaicing_and_masking/" class="md-nav__link">
        GDAL Mosaicing And Masking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../041_GDAL_timeseries/" class="md-nav__link">
        GDAL Timeseries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../042_Weighted_smoothing_and_interpolation/" class="md-nav__link">
        Weighted Smoothing And Interpolation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../043_Weighted_interpolation/" class="md-nav__link">
        Weighted Interpolation
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_5" type="checkbox" id="__nav_6_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_5">
          Answers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Answers" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          Answers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../040_GDAL_mosaicing_and_masking_answers/" class="md-nav__link">
        GDAL Mosaicing And Masking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../041_GDAL_timeseries_answers/" class="md-nav__link">
        GDAL Timeseries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../043_Weighted_interpolation_answers/" class="md-nav__link">
        Weighted Interpolation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Modelling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modelling" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Modelling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../050_Models/" class="md-nav__link">
        Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../051_Phenology_model/" class="md-nav__link">
        Phenology Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" type="checkbox" id="__nav_7_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3">
          Answers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Answers" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Answers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../050_Models_answers/" class="md-nav__link">
        Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../051_Phenology_model_answers/" class="md-nav__link">
        Phenology Model
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Assessment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Assessment" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Assessment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../060_Groups/" class="md-nav__link">
        Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../061_Script/" class="md-nav__link">
        Script
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../062_Part1/" class="md-nav__link">
        Part1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../063_Part1_code/" class="md-nav__link">
        Part1 Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../064_Numpy/" class="md-nav__link">
        Numpy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../065_LAI/" class="md-nav__link">
        Lai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../066_Part2/" class="md-nav__link">
        Part2
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_8" type="checkbox" id="__nav_8_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_8">
          Answers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Answers" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_8">
          <span class="md-nav__icon md-icon"></span>
          Answers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../060_Groups_answers/" class="md-nav__link">
        Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../061_Script_answers/" class="md-nav__link">
        Script
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../064_Numpy_answers/" class="md-nav__link">
        Numpy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../065_LAI_answers/" class="md-nav__link">
        Lai
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Summary
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Summary" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Summary
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../070_Summary/" class="md-nav__link">
        Summary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    Purpose
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test" class="md-nav__link">
    Test
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modis-lai-product" class="md-nav__link">
    MODIS LAI product
  </a>
  
    <nav class="md-nav" aria-label="MODIS LAI product">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1" class="md-nav__link">
    Exercise 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-nasa-modis-urls" class="md-nav__link">
    Accessing NASA MODIS URLs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-products" class="md-nav__link">
    Data Products
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mota" class="md-nav__link">
    MOTA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#masking" class="md-nav__link">
    masking
  </a>
  
    <nav class="md-nav" aria-label="masking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-2-mask-invalid-data" class="md-nav__link">
    Exercise 2: mask invalid data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#burned-area-dataset-mcd64a1" class="md-nav__link">
    Burned area dataset MCD64A1
  </a>
  
    <nav class="md-nav" aria-label="Burned area dataset MCD64A1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-3" class="md-nav__link">
    Exercise 3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snow" class="md-nav__link">
    Snow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#land-cover-dataset-mcd12q1" class="md-nav__link">
    Land Cover dataset MCD12Q1
  </a>
  
    <nav class="md-nav" aria-label="Land Cover dataset MCD12Q1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-5" class="md-nav__link">
    Exercise 5
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/UCL-EO/geog0111/edit/master/docs/030_NASA_MODIS_Earthdata.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="030-nasa-modis-earthdata">030 NASA MODIS Earthdata</h1>
<h2 id="introduction">Introduction</h2>
<h3 id="purpose">Purpose</h3>
<p>In this notebook, we will use high-level codes from <code>geog0111</code> to familiarise ourselves with downloading and interpreting NASA MODIS datasets from <a href="https://urs.earthdata.nasa.gov"><code>NASA EarthData</code></a>. We will also be visualising these data in this notebook.</p>
<p>We will be <strong>introducing NASA MODIS land products</strong>, and viewing the MODIS LAI product as an example. This notebook should serve as an introduction to accessing similar products from Earthdata.</p>
<p>For further work on NASA datasets, a student might consider using an explicit <a href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> to access the data. If all you want is to get hold of some data product for some defined location and time, then you might use an API such as <a href="https://lpdaacsvc.cr.usgs.gov/appeears/">Appeears</a>.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>Since the idea of this section is to get used to the datasets, the requirement for coding is quite low. You should have some familiarity with the following:</p>
<ul>
<li><a href="../001_Notebook_use/">001 Using Notebooks</a></li>
<li><a href="../010_Python_Introduction/">010 Variables, comments and print()</a></li>
<li><a href="../011_Python_data_types/">011 Data types</a> </li>
<li><a href="024_Image_display">024 Image display</a></li>
</ul>
<h3 id="test">Test</h3>
<p>You should run a <a href="../004_Accounts/">NASA account test</a> if you have not already done so.</p>
<h2 id="modis-lai-product">MODIS LAI product</h2>
<p>To introduce geospatial processing, we will use a dataset from the MODIS LAI product over the UK. </p>
<p>The data product <a href="https://modis.gsfc.nasa.gov/data/dataprod/mod15.php">MOD15</a> LAI/FPAR has been generated from NASA MODIS sensors Terra and Aqua data since 2002. We are now in dataset collection 6 (the data version to use).</p>
<pre><code>LAI is defined as the one-sided green leaf area per unit ground area in broadleaf canopies and as half the total needle surface area per unit ground area in coniferous canopies. FPAR is the fraction of photosynthetically active radiation (400-700 nm) absorbed by green vegetation. Both variables are used for calculating surface photosynthesis, evapotranspiration, and net primary production, which in turn are used to calculate terrestrial energy, carbon, water cycle processes, and biogeochemistry of vegetation. Algorithm refinements have improved quality of retrievals and consistency with field measurements over all biomes, with a focus on woody vegetation.
</code></pre>
<p>We use such data to map and understand about the dynamics of terrestrial vegetation / carbon, for example, for climate studies.</p>
<p>The raster data are arranged in tiles, indexed by row and column, to cover the globe:</p>
<p><img alt="MODIS tiles" src="https://www.researchgate.net/profile/J_Townshend/publication/220473201/figure/fig5/AS:277546596880390@1443183673583/The-global-MODIS-Sinusoidal-tile-grid.png" /></p>
<h4 id="exercise-1">Exercise 1</h4>
<p>The pattern on the tile names is <code>hXXvYY</code> where <code>XX</code> is the horizontal coordinate and <code>YY</code> the vertical.</p>
<ul>
<li>use the map above to work out the names of the two tiles that we will need to access data over the UK</li>
<li>set the variable <code>tiles</code> to contain these two names in a list</li>
</ul>
<p>For example, for the two tiles covering Madagascar, we would set:</p>
<pre><code>tiles = ['h22v10','h22v11']
</code></pre>
<h3 id="accessing-nasa-modis-urls">Accessing NASA MODIS URLs</h3>
<p><span class="burk"><strong>Warning: The NASA data servers tend to be down for maintainance on Wednesday morning EST</strong></span></p>
<p>Although you can access MODIS datasets through the <a href="https://urs.earthdata.nasa.gov/home">NASA Earthdata</a> interface, there are many occasions that we would want to just automatically pull datasets from a server. As we note above, we could use some existing API for this, such as <a href="https://lpdaacsvc.cr.usgs.gov/appeears/">Appeears</a>, but we are aiming here at being able to ultimately develop codes that do this from a lower-level perspective. </p>
<p>Automation has many roles, and is particularly useful when you want a time series of data that might involve many files. For example, for analysing LAI or other variables over space/time) we will want to write code that pulls the time series of data. </p>
<p>If you visit the site <a href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006</a>, you will see 'date' style links (e.g. <code>2018.09.30</code>) through to sub-directories. </p>
<p>In these, e.g. <a href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/</a> you will find URLs of a set of files. </p>
<p>The files pointed to by the URLs are the MODIS MOD15 4-day composite 500 m LAI/FPAR product <a href="https://lpdaac.usgs.gov/products/mcd15a3hv006/">MCD15A3H</a>.</p>
<p>There are links to several datasets on the page, including 'quicklook files' that are jpeg format images of the datasets, e.g.:</p>
<p><img alt="MCD15A3H.A2018273.h17v03" src="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/BROWSE.MCD15A3H.A2018273.h17v03.006.2018278143630.1.jpg" /></p>
<p>as well as <code>xml</code> files and <code>hdf</code> datasets. </p>
<h3 id="data-products">Data Products</h3>
<p>If we look at the dataserver we have specified <a href="https://e4ftl01.cr.usgs.gov">https://e4ftl01.cr.usgs.gov</a>, we will see that a number of sub-directories exist. Each of these 'server directories' points to a different data stream:</p>
<pre><code>[DIR] ASTT/                   2019-08-05 07:54    -   
[DIR] COMMUNITY/              2020-06-02 08:45    -   
[DIR] ECOSTRESS/              2020-04-09 10:30    -   
[DIR] GEDI/                   2020-02-10 09:58    -   
[DIR] MEASURES/               2020-03-17 10:55    -   
[DIR] MOLA/                   2020-06-01 09:20    -   
[DIR] MOLT/                   2020-04-14 08:06    -   
[DIR] MOTA/                   2019-12-27 06:49    -   
[DIR] VIIRS/                  2020-06-23 10:26    -
</code></pre>
<p>For example, we might notice <a href="https://e4ftl01.cr.usgs.gov/VIIRS">VIIRS</a> which takes us to the <a href="https://viirsland.gsfc.nasa.gov">VIIRS data products</a>, or <a href="https://e4ftl01.cr.usgs.gov/GEDI">GEDI</a> <a href="https://gedi.umd.edu/">spaceborne lidar</a> data. Each of these data streams will have their own properties that we need to appreciate before using them.</p>
<h3 id="mota">MOTA</h3>
<p>The URL we have used above, <a href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/</a> starts with a call to the server directory <code>MOTA</code>, so we can think of <code>https://e4ftl01.cr.usgs.gov/MOTA</code> as the base level URL.</p>
<p>MOTA refers to combined MODIS Terra and Aqua datasets. Similarly, MOLA and MOLT refer to datasets generated from single MODIS sensors of Aqua and Terra, respectively.</p>
<p>The rest of the directory information <code>MCD15A3H.006/2018.09.30</code> tells us:</p>
<ul>
<li>the product name <code>MCD15A3H</code></li>
<li>the product version <code>006</code></li>
<li>the date of the dataset <code>2018.09.30</code></li>
</ul>
<p>There are several ways we could specify the date information. The most 'human readable' is probably <code>YYYY.MM.DD</code> as given here, but we may also use day of year. Recall from <a href="../023_Plotting/#datetime">023 Plotting</a> how to convert date formats.</p>
<p>We will mainly use <a href="../geog0111/im_display.py"><code>geog0111.im_display</code></a> to do simple image plots. This is essentially the same as the code you have developed in <a href="../024_Image_display/#Exercise-2">an exercise</a>.</p>
<p>If we look at the <a href="https://lpdaac.usgs.gov/products/mcd15a3hv006/">product specification page</a> for <code>MCD15A3H</code> we see that the data product has multiple data layers. In the case of MCD15A3H, this is:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">SDS Name</th>
<th style="text-align: center;">Description</th>
<th style="text-align: center;">Units</th>
<th style="text-align: center;">Data Type</th>
<th style="text-align: center;">Fill Value</th>
<th style="text-align: center;">No Data Value</th>
<th style="text-align: center;">Valid Range</th>
<th>Scale Factor</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Fpar_500m</td>
<td style="text-align: center;">Fraction of Photosynthetically Active Radiation</td>
<td style="text-align: center;">Percent</td>
<td style="text-align: center;">8-bit unsigned integer</td>
<td style="text-align: center;">249 to 255</td>
<td style="text-align: center;">N/A</td>
<td style="text-align: center;">0 to 100</td>
<td>0.01</td>
</tr>
<tr>
<td style="text-align: center;">Lai_500m</td>
<td style="text-align: center;">Leaf Area Index</td>
<td style="text-align: center;">m²/m²</td>
<td style="text-align: center;">8-bit unsigned integer</td>
<td style="text-align: center;">249 to 255</td>
<td style="text-align: center;">N/A</td>
<td style="text-align: center;">0 to 100</td>
<td>0.1</td>
</tr>
<tr>
<td style="text-align: center;">FparLai_QC</td>
<td style="text-align: center;">Quality for  FPAR and LAI</td>
<td style="text-align: center;">Class Flag</td>
<td style="text-align: center;">8-bit unsigned integer</td>
<td style="text-align: center;">255</td>
<td style="text-align: center;">N/A</td>
<td style="text-align: center;">0 to 254</td>
<td>N/A</td>
</tr>
<tr>
<td style="text-align: center;">FparExtra_QC</td>
<td style="text-align: center;">Extra detail Quality for  FPAR and LAI</td>
<td style="text-align: center;">Class Flag</td>
<td style="text-align: center;">8-bit unsigned integer</td>
<td style="text-align: center;">255</td>
<td style="text-align: center;">N/A</td>
<td style="text-align: center;">0 to 254</td>
<td>N/A</td>
</tr>
<tr>
<td style="text-align: center;">FparStdDev_500m</td>
<td style="text-align: center;">Standard deviation of  FPAR</td>
<td style="text-align: center;">Percent</td>
<td style="text-align: center;">8-bit unsigned integer</td>
<td style="text-align: center;">248 to 255</td>
<td style="text-align: center;">N/A</td>
<td style="text-align: center;">0 to 100</td>
<td>0.01</td>
</tr>
<tr>
<td style="text-align: center;">LaiStdDev_500m</td>
<td style="text-align: center;">Standard deviation of LAI</td>
<td style="text-align: center;">m²/m²</td>
<td style="text-align: center;">8-bit unsigned integer</td>
<td style="text-align: center;">248 to 255</td>
<td style="text-align: center;">N/A</td>
<td style="text-align: center;">0 to 100</td>
<td>0.1</td>
</tr>
</tbody>
</table>
<p>We will use a simple recipe for accessing a dataset and plotting it. All examples below will follow the same pattern.</p>
<p>First, we use the <code>Modis</code> class in <code>geog0111.modis</code> to get the dataset. Recall from <a href="024_Image_display">024 Image display</a> that many of these datasets are cached on the system for you. If it takes a long time to retrieve a dataset, it is probably because you are downloading it, rather than using a cached copy. If it is Wednesday afternoon UK time, you will not be able to download new datasets, and can only use cached copies, as the NASA server is down for maintenance.</p>
<p>Notice that the LAI data have a valid range 0 to 100, and that a scale factor of 0.1 must be applied to the datas to interpret as LAI.</p>
<pre><code class="language-python">from geog0111.modisUtils import modisAnnual
from osgeo import gdal

#######################
# specify what we want
# in a dictionary
#######################
# UK tiles

kwargs = {
    'tile'      :    ['h17v03','h18v03','h17v04','h18v04'],
    'product'   :    'MCD15A3H',
    'sds'       :    ['Lai_500m'],
    'doys'       : [41],
    'year'      : 2019,
}

filename,bandname = modisAnnual(verbose=False,**kwargs)
data_MCD15A3H = {}
for f,v in filename.items():
    g = gdal.Open(v)
    if g:
        data_MCD15A3H[f] = g.ReadAsArray()
</code></pre>
<pre><code>ERROR 4: L: No such file or directory
Warning 1: Can't open L. Skipping it
</code></pre>
<pre><code class="language-python">from geog0111.im_display import im_display

im_display(data_MCD15A3H,['Lai_500m'],x_size=16,y_size=8,vmax=100)
</code></pre>
<p><img alt="png" src="../030_NASA_MODIS_Earthdata_files/030_NASA_MODIS_Earthdata_9_0.png" /></p>
<h3 id="masking">masking</h3>
<p>We can see from the  <a href="https://lpdaac.usgs.gov/products/mcd15a3hv006/">product specification page</a> for <code>MCD15A3H</code> that values above <code>100</code> for <code>Lai_500m</code> are invalid. In addition, a scale factor of 0.1 should be applied.</p>
<p>We will learn more of this later, but for now, note that we can use code such as the following to apply the scaling factor and mask invalid numbers. We need to import the <code>numpy</code> package for this first (<code>import numpy as np</code>).</p>
<pre><code class="language-python">from geog0111.modisUtils import modisAnnual
from osgeo import gdal

#######################
# specify what we want
# in a dictionary
#######################
# UK tiles

kwargs = {
    'tile'      :    ['h17v03','h18v03','h17v04','h18v04'],
    'product'   :    'MCD15A3H',
    'sds'       :    ['Lai_500m'],
    'doys'       : [41],
    'year'      : 2019,
}

filename,bandname = modisAnnual(verbose=False,**kwargs)
data_MCD15A3H = {}
for f,v in filename.items():
    g = gdal.Open(v)
    if g:
        data_MCD15A3H[f] = g.ReadAsArray()
</code></pre>
<pre><code>ERROR 4: L: No such file or directory
Warning 1: Can't open L. Skipping it
</code></pre>
<pre><code class="language-python">import numpy as np
# multiply by scale
scale = 0.1
ds = data_MCD15A3H['Lai_500m'] * scale
# mask invalid by setting to 
ds[ds&gt;100 * scale] = np.nan

# load back into data_MCD15A3H
data_MCD15A3H['Lai_500m'] = ds

# plot
im_display(data_MCD15A3H,['Lai_500m'],x_size=16,y_size=8)
</code></pre>
<p><img alt="png" src="../030_NASA_MODIS_Earthdata_files/030_NASA_MODIS_Earthdata_12_0.png" /></p>
<p>The dataset, being a measurement, is not spatially complete. This is because of clouds and other factors meaning that the algorithm to produce LAI could not run at that time. It is very common that you will find geospatial datasets have missing values. We will learn later on when and how we might fill these gaps.</p>
<h4 id="exercise-2-mask-invalid-data">Exercise 2: mask invalid data</h4>
<ul>
<li>
<p>write a function called <code>data_mask</code> that is given:</p>
<ul>
<li>a data dictionary</li>
<li>a list of sds strings</li>
<li>a list of scale factors</li>
<li>a list of upper threshold values</li>
<li>a list of lower threshold values
  and returns the dictionary with the scaled and masked datasets </li>
</ul>
</li>
<li>
<p>plot both <code>Lai_500m</code> and <code>LaiStdDev_500m</code> side-by-side. You should apply appropriate scaling factors and masking as above.</p>
</li>
</ul>
<h2 id="burned-area-dataset-mcd64a1">Burned area dataset <code>MCD64A1</code></h2>
<p>We can use the same codes to access different MODIS datasets. For example the monthly <a href="https://lpdaac.usgs.gov/products/mcd64a1v006/"><code>MCD64A1</code></a> product:</p>
<p><a href="https://lpdaac.usgs.gov/products/mcd64a1v006/"><img alt="MCD15A3H" src="../images/MCD15A3H.png" /></a></p>
<p>For the <code>Burn Date</code> field, values of -2 to 0 are invalid. We can visualise this with code as above, but first we need to get the day of year for the month we want. Recall from <a href="../023_Plotting/#datetime">023 Plotting</a> that we can use <code>datetime</code> for this. We do this by working out the difference between the day of the month in question and the 31st day of December for the previous year.</p>
<pre><code class="language-python">from datetime import datetime

year = 2019
day = 1
for month in range(1,13):
    doy = (datetime(year,month,day) - datetime(year-1,12,31)).days
    print(f'1st of {month:&lt;2d} is doy {doy}')
</code></pre>
<pre><code>1st of 1  is doy 1
1st of 2  is doy 32
1st of 3  is doy 60
1st of 4  is doy 91
1st of 5  is doy 121
1st of 6  is doy 152
1st of 7  is doy 182
1st of 8  is doy 213
1st of 9  is doy 244
1st of 10 is doy 274
1st of 11 is doy 305
1st of 12 is doy 335
</code></pre>
<h4 id="exercise-3">Exercise 3</h4>
<ul>
<li>write a function called <code>get_doy</code> that is given the year, month and day integer and returns the day of year</li>
<li>test it</li>
</ul>
<p>We now simply need to encode any scale factors or invalidity thresholds, and we can plot the dataset:</p>
<pre><code class="language-python">from geog0111.modisUtils import modisAnnual
from osgeo import gdal
from geog0111.im_display import im_display
from geog0111.data_mask import data_mask
from geog0111.get_doy import get_doy

year  = 2019
month = 6
doy = get_doy(year,month,1)

# h22v10 is Madagascar
kwargs = {
    'tile'      :    ['h22v10'],
    'product'   :    'MCD64A1',
    'doys'       : [doy],
    'sds'       :    ['Burn Date'],
    'year'      : year,
}

filename,bandname = modisAnnual(verbose=False,**kwargs)
data_MCD64A1 = {}
for f,v in filename.items():
    g = gdal.Open(v)
    if g:
        data_MCD64A1[f] = g.ReadAsArray()
</code></pre>
<pre><code>ERROR 4: B: No such file or directory
Warning 1: Can't open B. Skipping it
</code></pre>
<pre><code class="language-python">scale   = [1]
uthresh = [200]
lthresh = [0]

data_MCD64A1 = data_mask(data_MCD64A1,kwargs['sds'],scale,uthresh,lthresh)

# have to take sub-area to see anything here:
# define row and column min/max with r=[1500,2000],c=[1000,1500]
im_display(data_MCD64A1,kwargs['sds'],\
           x_size=10,y_size=8,\
           r=[1800,2000],c=[1000,1200])
</code></pre>
<p><img alt="png" src="../030_NASA_MODIS_Earthdata_files/030_NASA_MODIS_Earthdata_20_0.png" /></p>
<h2 id="snow">Snow</h2>
<p>There are two MODIS daily snow cover datasets: <a href="https://modis-snow-ice.gsfc.nasa.gov/?c=MOD10A1"><code>MOD10A1</code> and <code>MYD10A1</code></a> for data from the MODIS Terra and Aqua sensors, respectively. The field <a href="https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MOD10A1"><code>NDSI_Snow_Cover</code></a> has valid values in the range 0 to 100.</p>
<pre><code class="language-python"># not now needed to access data for snow
#from geog0111.modisUtils import preamble
#preamble()
</code></pre>
<pre><code class="language-python">from geog0111.modisUtils import modisAnnual
from osgeo import gdal
from geog0111.im_display import im_display
from geog0111.data_mask import data_mask
from geog0111.get_doy import get_doy

year  = 2019
month = 12
doy = get_doy(year,month,1)

kwargs = {
    'tile'      :    ['h19v03'],
    'product'   :    'MOD10A1',
    'sds'       :     ['NDSI_Snow_Cover'],
    'year'      : year,
    'doys'        : [doy]
}

scale   = [1]
uthresh = [101]
lthresh = [-1]
sds     = kwargs['sds']

filename,bandname = modisAnnual(verbose=False,**kwargs)
data_MOD10A1 = {}
for f,v in filename.items():
    g = gdal.Open(v)
    if g:
        data_MOD10A1[f] = g.ReadAsArray()

data_MOD10A1 = data_mask(data_MOD10A1,sds,scale,uthresh,lthresh)
</code></pre>
<pre><code>ERROR 4: N: No such file or directory
Warning 1: Can't open N. Skipping it
</code></pre>
<pre><code class="language-python"># have to take sub-area to see anything here:
# define row and column min/max with r=[1500,2000],c=[1000,1500]
im_display(data_MOD10A1,kwargs['sds'],\
           x_size=10,y_size=8,colourmap='gray')
</code></pre>
<p><img alt="png" src="../030_NASA_MODIS_Earthdata_files/030_NASA_MODIS_Earthdata_24_0.png" /></p>
<h2 id="land-cover-dataset-mcd12q1">Land Cover dataset <code>MCD12Q1</code></h2>
<p>One of the MODIS land cover products is <code>MCD12Q1</code>. We briefly examined this product in the previous session, but can take the chance now to explore it further. The datasets are yearly, given for <code>doy</code> 1. Details of the product can be found at the product page (<code>MCD12Q1</code>)[https://lpdaac.usgs.gov/products/mcd12q1v006/].</p>
<p>We previously developed a code <a href="../geog0111/plot_lc.py"><code>get_lc</code></a> to set up the colourmaps and plot the <code>LC_Type1</code> for a given year and set of tiles. This is the <code>Land Cover Type 1: Annual International Geosphere-Biosphere Programme (IGBP) classification</code>. </p>
<pre><code class="language-python">from geog0111.plot_lc import plot_lc
from geog0111.modisUtils import modisAnnual
from osgeo import gdal

# Madagascar

# ensure tiles is a list
kwargs = {
    'product'   :    'MCD12Q1',
    'sds'       :    ['LC_Type1'],
    'year'      :    2019,
    'doys'      : [1],
    'tile'      : ['h22v10']
}

filename,bandname = modisAnnual(verbose=False,**kwargs)

data_MCD12Q1 = {}
for f,v in filename.items():
    g = gdal.Open(v)
    if g:
        data_MCD12Q1[f] = g.ReadAsArray()

# the data we want here
plot_lc(data_MCD12Q1['LC_Type1'])
</code></pre>
<pre><code>ERROR 4: L: No such file or directory
Warning 1: Can't open L. Skipping it
</code></pre>
<p><img alt="png" src="../030_NASA_MODIS_Earthdata_files/030_NASA_MODIS_Earthdata_26_1.png" /></p>
<h4 id="exercise-5">Exercise 5</h4>
<ul>
<li>Explore the MODIS datasets in your own time, and get to know the datasets they contain, along with the scaling factors and other interpretation information. Note that if we have not already downloaded particular datasets into the cache, it  may take a short time for them to download and load.</li>
</ul>
<h1 id="summary">Summary</h1>
<p>In these notes, we have introduced the characteristics of MODIS data products, and learned how to specify, access, and display them for a number of datasets. You will have accessed a number of products under a number of conditions in the exercises, but you are encouraged to explore this further.</p>
<p>The main item to do with using data products of this sort, that we haven't covered yet, is the interpretation of Quality Assurance (QA) data. This is often packed information into bits, and can be a little tricky at first. However, as with above, once you have a little familiarisation with a few cases, you will be able to apply this more widely.</p>
<p>You should spend some time going through the various links to explore the different datasets, and try out the exercises above for various products. The familiarity you gain from this will help when it comes to building our own codes later on.</p>
<p>Some MODIS datasets</p>
<ul>
<li><a href="https://lpdaac.usgs.gov/products/mcd15a3hv006/"><code>MCD15A3H</code> LAI/fAPAR</a></li>
<li><a href="https://lpdaac.usgs.gov/products/mcd64a1v006/"><code>MCD64A1</code> Burned Area</a>1</li>
<li><a href="https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MOD10A1#bands"><code>MOD10A1 / MYD10A1 Snow Products</code></a></li>
<li><a href="https://lpdaac.usgs.gov/products/mcd12q1v006/"><code>Land Cover dataset MCD12Q1</code></a></li>
</ul>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 6, 2021</span>
      
    
  </small>
</div>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../024_Image_display_answers/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Image Display" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Image Display
            </div>
          </div>
        </a>
      
      
        
        <a href="../031_Numpy/" class="md-footer__link md-footer__link--next" aria-label="Next: Numpy" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Numpy
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://twitter.com/prof_plewis" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://hub.docker.com/r/proflewis/geog0111" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/UCL-EO/geog0111" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
        <script src="../javascripts/config.js"></script>
      
    
  </body>
</html>